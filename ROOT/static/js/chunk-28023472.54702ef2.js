(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-28023472"],{"099a":function(t,e,a){},"48be":function(t,e,a){},7021:function(t,e,a){"use strict";var n=a("48be"),r=a.n(n);r.a},9406:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard-container layout-column",staticStyle:{overflow:"auto"}},[a("el-divider",{attrs:{"content-position":"left"}},[t._v("收款数据")]),a("div",{staticClass:"layout-row__between"},[a("el-card",{attrs:{shadow:"hover"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"layout-row__between"},[a("div",[t._v("累计收款金额")]),a("div",{staticClass:"money"},[t._v(t._s((t.amountData.all.amount/1e4).toFixed(6))+" 万")])])]),a("div",{staticClass:"card-item layout-row__between"},[a("div",{staticClass:"layout-column"},[a("div",[t._v("订单数")]),a("div",{staticClass:"num"},[t._v(t._s(t.amountData.all.orders)+"笔")])]),a("div",{staticClass:"layout-column"},[a("div",[t._v("成功率")]),a("div",{staticClass:"num"},[t._v(t._s(100*t.amountData.all.successRate)+"%")])])])]),a("el-card",{attrs:{shadow:"hover"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"layout-row__between"},[a("div",[t._v("本月收款金额")]),a("div",{staticClass:"money"},[t._v(t._s((t.amountData.thisMonth.amount/1e4).toFixed(6))+" 万")])])]),a("div",{staticClass:"card-item layout-row__between"},[a("div",{staticClass:"layout-column"},[a("div",[t._v("订单数")]),a("div",{staticClass:"num"},[t._v(t._s(t.amountData.thisMonth.orders)+"笔")])]),a("div",{staticClass:"layout-column"},[a("div",[t._v("成功率")]),a("div",{staticClass:"num"},[t._v(t._s(100*t.amountData.thisMonth.successRate)+"%")])])])]),a("el-card",{attrs:{shadow:"hover"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"layout-row__between"},[a("div",[t._v("昨日收款金额")]),a("div",{staticClass:"money"},[t._v(t._s((t.amountData.yesterday.amount/1e4).toFixed(6))+" 万")])])]),a("div",{staticClass:"card-item layout-row__between"},[a("div",{staticClass:"layout-column"},[a("div",[t._v("订单数")]),a("div",{staticClass:"num"},[t._v(t._s(t.amountData.yesterday.orders)+"笔")])]),a("div",{staticClass:"layout-column"},[a("div",[t._v("成功率")]),a("div",{staticClass:"num"},[t._v(t._s(100*t.amountData.yesterday.successRate)+"%")])])])]),a("el-card",{attrs:{shadow:"hover"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"layout-row__between"},[a("div",[t._v("今日收款金额")]),a("div",{staticClass:"money"},[t._v(t._s((t.amountData.today.amount/1e4).toFixed(6))+" 万")])])]),a("div",{staticClass:"card-item layout-row__between"},[a("div",{staticClass:"layout-column"},[a("div",[t._v("订单数")]),a("div",{staticClass:"num"},[t._v(t._s(t.amountData.today.orders)+"笔")])]),a("div",{staticClass:"layout-column"},[a("div",[t._v("成功率")]),a("div",{staticClass:"num"},[t._v(t._s(100*t.amountData.today.successRate)+"%")])])])])],1),1===t.userinfo.roleId?a("div",{staticClass:"layout-column__between"},[a("el-divider",{attrs:{"content-position":"left"}},[t._v("昨日代理数据")]),a("el-table",{attrs:{data:t.proxyList,stripe:!0,border:""}},[a("el-table-column",{attrs:{label:"代理名称",prop:"name"}}),a("el-table-column",{attrs:{label:"金额",prop:"amount"}}),a("el-table-column",{attrs:{label:"订单数量",prop:"orders"}}),a("el-table-column",{attrs:{label:"成功率",prop:"successRate"}})],1)],1):t._e(),3===t.userinfo.roleId||1===t.userinfo.roleId?a("div",{staticClass:"layout-column__between"},[a("el-divider",{attrs:{"content-position":"left"}},[t._v("昨日商户数据")]),a("el-table",{attrs:{data:t.merchantList,stripe:!0,border:""}},[a("el-table-column",{attrs:{label:"商户名称",prop:"name"}}),a("el-table-column",{attrs:{label:"金额",prop:"amount"}}),a("el-table-column",{attrs:{label:"订单数量",prop:"orders"}}),a("el-table-column",{attrs:{label:"成功率",prop:"successRate"}})],1)],1):t._e(),a("SettleModal",{attrs:{visible:t.visible},on:{"update:visible":function(e){t.visible=e}}})],1)},r=[],s=(a("5ab2"),a("6d57"),a("e10e"),a("9d37")),o=(a("4286"),a("cc57"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"date-picker layout-row"},[a("div",{staticClass:"dates"},t._l(t.recently,(function(e,n){return a("el-button",{key:n,attrs:{type:t.btnIndex===n+1?"primary":"text"},on:{click:function(a){return t.changeDate(e.day,n+1)}}},[t._v(t._s(e.name))])})),1),t.timeShow?a("el-date-picker",{attrs:{clearable:!1,"unlink-panels":"","value-format":"yyyy-MM-dd",type:"daterange","range-separator":"至","start-placeholder":"开始日期","picker-options":t.pickerOptions,"end-placeholder":"结束日期"},on:{change:t.pickerChange},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}):t._e()],1)}),i=[],l=(a("e204"),a("100f")),c=a.n(l),u={props:{date:{default:function(){return[c()().subtract(1,"day"),c()()]},type:Array},timeShow:{type:Boolean,default:!0}},data:function(){return{btnIndex:0,recently:[{name:"今天",day:0},{name:"近三天",day:3},{name:"近一周",day:7}],pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()||t.getTime()<c()().subtract(7,"day")}}}},watch:{date:{handler:function(t){var e=c()(t[1]).diff(t[0],"day");this.btnIndex=this.recently.findIndex((function(t){return t.day===e}))+1},immediate:!0}},created:function(){},mounted:function(){},methods:{pickerChange:function(t){this.$emit("update:date",t),this.$emit("change",t)},changeDate:function(t,e){var a=[c()().subtract(t,"day").format("YYYY-MM-DD"),c()().format("YYYY-MM-DD")];this.$emit("update:date",a),this.$emit("change",a)}}},d=u,m=(a("7021"),a("5511")),y=Object(m["a"])(d,o,i,!1,null,"389f4ec3",null),p=y.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"申请提现",visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"对方",prop:"partner"}},[a("el-select",{attrs:{placeholder:"",clearable:""},model:{value:t.form.partner,callback:function(e){t.$set(t.form,"partner",e)},expression:"form.partner"}},t._l(t.payWay,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:"结算方式",prop:"settlementWay"}},[a("el-select",{attrs:{placeholder:"结算方式",clearable:""},model:{value:t.form.settlementWay,callback:function(e){t.$set(t.form,"settlementWay",e)},expression:"form.settlementWay"}},t._l(t.payWay,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:"金额",prop:"settlementMoney"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入金额"},model:{value:t.form.settlementMoney,callback:function(e){t.$set(t.form,"settlementMoney",e)},expression:"form.settlementMoney"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancel}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.sure}},[t._v("确定结算")])],1)],1)},b=[],v=a("fd4b"),h=a("52c1");a("f8b7");function _(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function g(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?_(Object(a),!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var w={props:["visible"],computed:g({},Object(h["c"])(["settings"]),{payWay:function(){return this.settings.payWay}}),data:function(){return{settleWay:[{label:"支付宝",value:"ali"},{label:"微信",value:"wx"},{label:"银行卡",value:"bank"}],form:{settlementWay:"",aliAccount:"",wxAccount:"",bankAccount:"",settlementMoney:"",bank:"",name:"",address:""},rules:{settlementWay:[{required:!0,message:"请选择添加结算方式",trigger:"change"}],aliAccount:[{required:!0,message:"请输入支付宝账号",trigger:"blur"}],wxAccount:[{required:!0,message:"请输入微信卡号",trigger:"blur"}],bankAccount:[{required:!0,message:"请输入卡号",trigger:"blur"}],settlementMoney:[{required:!0,message:"请输入金额",trigger:"blur"}],bank:[{required:!0,message:"请输入银行名称",trigger:"blur"}],name:[{required:!0,message:"请输入真实姓名",trigger:"blur"}],address:[{required:!0,message:"请输入开户所在地址",trigger:"blur"}]}}},methods:{sure:function(){var t=this,e=this.form.settlementWay,a=["settlementWay","settlementMoney"];a=[].concat(Object(v["a"])(a),"bank"==e?["bankAccount","name","bank","address"]:"ali"==e?["aliAccount"]:["wxAccount"]);var n=[];if(this.$refs.form.validateField(a,(function(t){n.push(!t)})),n.every((function(t){return t}))){var r={settlementWay:this.form.settlementWay,settlementMoney:this.form.settlementMoney,settlementConfig:{}};a.map((function(e){"settlementWay"!=e&&"settlementMoney"!=e&&(r.settlementConfig[e]=t.form[e])})),r.settlementConfig=JSON.stringify(r.settlementConfig),settleCreate(r).then((function(e){t.$message.success("申请成功，将在一个工作日内审核"),t.cancel()})).catch((function(e){t.$message.error("申请失败，请重新申请！")}))}},cancel:function(){this.$emit("update:visible",!1)}}},O=w,D=Object(m["a"])(O,f,b,!1,null,"3fd84f79",null),j=D.exports,C=a("365c");a("391c");function W(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function k(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?W(Object(a),!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):W(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var x={name:"Dashboard",components:{DatePicker:p,SettleModal:j},data:function(){var t;return{amountData:(t={payWay:{"alipay-当面付原生":{},"alipay-个码":{},"wx-个码":{amount:0},"云闪付":{},"alipay-个人红包":{}},all:{amount:0,successRate:0,orders:0},yesterday:{amount:0,successRate:0,orders:0},today:{amount:0,successRate:0,orders:0}},Object(s["a"])(t,"payWay",{}),Object(s["a"])(t,"thisMonth",{amount:0,successRate:0,orders:0}),Object(s["a"])(t,"settlement",{amount:null,hasBeenSettled:null,forThe:null}),t),merchantList:[],proxyList:[],visible:!1,version:"1.0.0",time:[c()().subtract(0,"day").format("YYYY-MM-DD"),c()().format("YYYY-MM-DD")],nowTime:(new c.a).format("YYYY-MM-DD HH:mm:ss"),list:{orders:0,merchants:0,code_merchants:0,merchant_num:0,aggregate:0,settlementSuccessMoney:0,successRate:{}},body:[]}},computed:k({},Object(h["c"])(["settings"]),{},Object(h["b"])(["userinfo"]),{payList:function(){return[{name:"微信个码",amount:this.amountData.payWay["wx-个码"].amount||0,num:this.amountData.payWay["wx-个码"].orders,rate:100*this.amountData.payWay["wx-个码"].successRate},{name:"支付宝个码",amount:this.amountData.payWay["alipay-个码"].amount||0,num:this.amountData.payWay["alipay-个码"].orders,rate:100*this.amountData.payWay["alipay-个码"].successRate},{name:"当面付",amount:this.amountData.payWay["alipay-当面付原生"].amount||0,num:this.amountData.payWay["alipay-当面付原生"].orders,rate:100*this.amountData.payWay["alipay-当面付原生"].successRate},{name:"云闪付",amount:this.amountData.payWay["云闪付"].amount||0,num:this.amountData.payWay["云闪付"].orders,rate:100*this.amountData.payWay["云闪付"].successRate},{name:"个人红包",amount:this.amountData.payWay["alipay-个人红包"].amount||0,num:this.amountData.payWay["alipay-个人红包"].orders,rate:this.amountData.payWay["alipay-个人红包"].successRate}]},hasPermission:function(){return!!this.userinfo.roles.filter((function(t){return 1==t.id||2==t.id})).length}}),created:function(){this.getHead(),this.getBody()},methods:{getHead:function(){var t=this;Object(C["c"])().then((function(e){console.log(e),t.amountData=e.data})).catch((function(t){}))},getBody:function(){var t=this;Object(C["a"])({dayNum:1}).then((function(e){var a=e.data.proxy,n=e.data.merchant;for(var r in a){t.proxyList.push({name:r,amount:a[r].amount||0,successRate:100*a[r].successRate+"%",orders:a[r].orders})}for(var s in n){t.merchantList.push({name:s,amount:n[s].amount||0,successRate:100*n[s].successRate+"%",orders:n[s].orders})}}))}}},M=x,R=(a("c47c"),Object(m["a"])(M,n,r,!1,null,"074cb175",null));e["default"]=R.exports},c47c:function(t,e,a){"use strict";var n=a("099a"),r=a.n(n);r.a},f8b7:function(t,e,a){"use strict";a.d(e,"e",(function(){return o})),a.d(e,"c",(function(){return i})),a.d(e,"d",(function(){return l})),a.d(e,"a",(function(){return c})),a.d(e,"f",(function(){return u})),a.d(e,"b",(function(){return d}));var n=a("b775"),r=a("fed1"),s=a.n(r);function o(t){return Object(n["a"])({url:"/order/list",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/order/".concat(t),method:"delete"})}function l(){return Object(n["a"])({url:"/order",method:"get"})}function c(t){return Object(n["a"])({url:"/pay/".concat(t),method:"get"})}function u(t){return Object(n["a"])({url:"/order/replacementOrder",method:"post",data:s.a.stringify(t)})}function d(t){return Object(n["a"])({url:"/order/optimalPay",method:"post",data:s.a.stringify(t)})}}}]);